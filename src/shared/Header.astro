---
import DarkModeToggle from "../components/DarkModeToggle.astro";
import DarkModeToggleTwo from "../components/DarkModeToggleTwo.astro";
import SocialLinks from "../components/SocialLinks.astro";

const { path } = Astro.props;
---
<aside class="space-y-2 mb-4 md:mb-0 md:fixed">
    <div class="flex justify-between items-center">
        <a href="/" title="Home">
            {
                ['/', '/proyectos/', '/tags/', '/acerca/'].includes(path)
                    ? <h1 class="text-2xl font-extrabold font-mono text-slate-800 underline dark:text-slate-200">Jhon Achata</h1>
                    : <p class="text-2xl font-extrabold font-mono text-slate-800 underline dark:text-slate-200">Jhon Achata</p>
            }
        </a>
        <div class="flex justify-end items-center gap-x-4">
            <DarkModeToggle />
            <button class="toggle md:hidden flex flex-col space-y-1" aria-label="Menu">
                <div class="bg-black dark:bg-slate-300 h-1 w-6 rounded-sm transition-all origin-left"></div>
                <div class="bg-black dark:bg-slate-300 h-1 w-6 rounded-sm transition-all origin-left"></div>
                <div class="bg-black dark:bg-slate-300 h-1 w-6 rounded-sm transition-all origin-left"></div>
            </button>
        </div>
    </div>
    <nav class="space-y-3 hidden md:block font-mono text-slate-800 tracking-wide dark:text-slate-200">
        <ul class="text-sm font-bold">
            <li class="py-2">
                <a
                    href="/proyectos/"
                    class:list={[{'underline':path.includes('proyectos')}]}
                    title="Proyectos"
                >Proyectos</a>
            </li>
            <li class="py-2">
                <a
                    href="/tags/"
                    class:list={[{'underline':path.includes('tags')}]}
                    title="Tags"
                >Tags</a>
            </li>
            <li class="py-2">
                <a
                    href="/acerca/"
                    class:list={[{'underline':path.includes('acerca')}]}
                    title="Acerca"
                >Acerca</a>
            </li>
        </ul>
        <SocialLinks />

        <DarkModeToggleTwo />
        <!-- <ul class="text-sm text-purple-400 font-body font-semibold">
            <li class="py-1">
                <a href="https://github.com/dcyar" class="flex items-center space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" />
                    </svg>
                    <span>Github</span>
                </a>
            </li>
            <li class="py-1">
                <a href="https://linkedin.com/in/jhonachata" class="flex items-center space-x-1">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
                        stroke="currentColor" class="w-3 h-3">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M11.25 4.5l7.5 7.5-7.5 7.5m-6-15l7.5 7.5-7.5 7.5" />
                    </svg>
                    <span>Linkedin</span>
                </a>
            </li>
        </ul> -->
    </nav>
</aside>

<script>
    document.querySelector('.toggle').addEventListener('click', () => {
        const menus = document.querySelectorAll('.toggle div');

        menus[0].classList.toggle('rotate-45');
        menus[1].classList.toggle('opacity-0');
        menus[2].classList.toggle('-rotate-45');

        document.querySelector('nav').classList.toggle('hidden');
    });

    const html = document.documentElement;
    const themeToggleButton = document.getElementsByClassName('theme-toggle');
    const sunSvg = document.getElementById('sun');
    const moonSvg = document.getElementById('moon');
    const sunSvg2 = document.getElementById('sun-2');
    const moonSvg2 = document.getElementById('moon-2');

    let theme = localStorage.getItem('T_SITE_THEME') || 'light';
    theme === 'light' ? setLightTheme() : setDarkTheme();

    function setDarkTheme() {
        html.classList.add('dark');
        moonSvg.classList.add('hidden');
        sunSvg.classList.remove('hidden');
        moonSvg2.classList.add('hidden');
        sunSvg2.classList.remove('hidden');
        localStorage.setItem('T_SITE_THEME', 'dark');
        theme = 'dark';
    }

    function setLightTheme() {
        html.classList.remove('dark');
        moonSvg.classList.remove('hidden');
        sunSvg.classList.add('hidden');
        moonSvg2.classList.remove('hidden');
        sunSvg2.classList.add('hidden');
        localStorage.setItem('T_SITE_THEME', 'light');
        theme = 'light';
    }

    Array.from(themeToggleButton).forEach(element => {
        element.addEventListener('click', () => {
            theme === 'light' ? setDarkTheme() : setLightTheme();
        }); 
    });
</script>