---
import LayoutPost from '../layouts/LayoutPost.astro';

export async function getStaticPaths() {
    const posts = await Astro.glob('../posts/*.md');

    return posts.map((post) => ({
        params: {
            slug: post.frontmatter.slug,
        },
        props: { post },
    }));
}

const { Content, frontmatter } = Astro.props.post;
---

<LayoutPost
    title={frontmatter.title}
    description={frontmatter.excerpt}
    publishedAt={frontmatter.publishedAt}
    path={`/${frontmatter.slug}`}
>
    <Content />
</LayoutPost>

<script>
    document.querySelectorAll('.astro-code').forEach((p) => {
        p.classList.add(
            'bg-slate-900',
            'overflow-x-auto',
            'p-4',
            'my-4',
            'rounded-xl'
        );
    });

    document.querySelectorAll('p > code').forEach((c) => {
        c.classList.add(
            'bg-lime-100',
            'p-1',
            'rounded-sm',
            'text-blue-600',
            'font-semibold',
            'shadow-md'
        );
    });
</script>
