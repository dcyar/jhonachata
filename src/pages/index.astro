---
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro';
import { formatDate } from '../helpers';

const allPost = await Astro.glob('../posts/*.{md,mdx}');
const posts = allPost
    .filter((post) => !post.frontmatter.draft)
    .sort((a, b) => {
        return (
            new Date(b.frontmatter.publishedAt).getTime() -
            new Date(a.frontmatter.publishedAt).getTime()
        );
    });
---

<Layout title="Jhon Achata â€” Inicio">
    <article class="flex-flex-col">
        {
            posts.map((post) => (
                <PostCard
                    title={post.frontmatter.title}
                    href={post.frontmatter.slug}
                    body={post.frontmatter.excerpt}
                    date={formatDate(post.frontmatter.publishedAt)}
                />
            ))
        }
    </article>
</Layout>
